<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>
<head>
  <meta name="generator" content=
  "HTML Tidy for Mac OS X (vers 1st December 2004), see www.w3.org">

<style type="text/css" title="currentStyle">

  /* text margins and font */
  body
  {
    font:14px verdana, sans-serif;
    color: #2c2c2c;    
    margin: 2ex 7.5% 2ex 7.5%;
    padding-bottom: 2ex;
  }

  /* Header with border */
  h1 
  {
    border-bottom-style: solid;
    border-color: #404040;
    border-width: 1px;
    padding-bottom: 0.25ex;
    
  }
  
  /* Headers colour */
  h1,h2,h3,h4 
  {
    color:#4070C0
  }

  /* link colouring */
  a:link 
  {
    color: #0078FF;
    text-decoration: none;
  }

  /* visited link coloring */
  a:visited 
  {
    color: #880000;
    text-decoration: none;
  }

  pre
  {
    border: 2px solid gray;
    padding: 1px;
    padding-left: 5px;
    margin-left: 10px;
    background-color: #eee;
  }

  pre.define
  {
    background-color: #ffb;
    border-color: #cc0;
  }


  /* footer style */
  p.footer
  {
    border-top-style: solid;
    border-top-width: 1px;
    border-color: #404040;
    padding-top:1ex;
    color: #878787;
    font-family: Helvetica;
    font-size: 75%;
    text-align: right;
  }

</style>

  <title>IOSpec</title>
</head>

<body>
  <h1>IOSpec: a pure specification of the IO monad</h1>

  <p>IOSpec is a library containing a pure specification of several
  functions in the IO monad. You can use these specifications to
  test, debug, or reason about impure code.</p>

  <h2>Introduction</h2>

  <p>To get a taste of what you can do, consider the following (not
  terribly exciting) code snippet:</p>
  <pre>
  import Test.IOSpec.IORef

  readOnce :: Int -&gt; IOState Int
  readOnce x = do ref &lt;- newIORef x
                  readIORef ref

  readTwice :: Int -&gt; IOState Int
  readTwice x = do ref &lt;- newIORef x
                   readIORef ref
                   readIORef ref
                 
  readIORefProp :: Int -&gt; Bool
  readIORefProp x = runIOState (readOnce x) == runIOState (readTwice x)
</pre>

  <p>Sure enough, we can test the above property and learn
  what we knew all along: reading an IORef does not modify its
  contents. This might seem trivial, but this property does not hold
  for MVars, for instance.</p>

  <p>A more interesting examples is an 'imperative' implementation
  of queues, using IORefs to create linked lists. Suppose we
  implement the following operations:</p>

  <pre>
  emptyQueue :: IOState Queue
  enqueue :: Queue -> Int -> IOState ()
  dequeue :: Queue -> IOState (Maybe Int)</pre>

  <p>We can use QuickCheck to verify properties of our implementation
  <i>as if it was pure</i>. Once we are satisfied with our
  implementation, we can import Data.IORef and use real IORefs,
  instead of the pure specification provided by IOSpec.</p>

  <p>Of course, you can accomplish all of this using the ST monad. The
  IOSpec library is, however, not restricted to IORefs. There are
  also pure specifications of concurrency and teletype primitives. </p>

  <h2>Download</h2>

  <p>A <a href="dist/IOSpec-0.1.tar.gz">a tarball containing the
  sources</a> is available.</p>

  <p>Alternatively, you may want to check out the following darcs
  repository:</p>
  <pre>
  darcs get http://www.cs.nott.ac.uk/~wss/repos/IOSpec
</pre>

  <h2>Installation</h2>The library is fully cabalised. To install
  it, just issue the following commands:
  <pre>
  runhaskell Setup.lhs configure
  runhaskell Setup.lhs build
  runhaskell Setup.lhs install
</pre>If you want to customise the installation process, you may
want to read more about <a href=
"http://www.haskell.org/ghc/docs/latest/html/Cabal/builders.html">
  Cabal</a>.

  <h2>Documentation</h2>

  <p>The examples directory that comes with the sources contains
  several well-documented examples.</p>

  <p>For the moment, I'd recommend you have a look at <a href=
  "dist/doc/html/index.html">Haddock-generated API</a>.</p>

  <p>The implementation is described in the following paper:</p>

  <ul> <li><a href=
    "http://www.cs.nott.ac.uk/~wss/Publications/icfp07-wouter.pdf">Beauty
    in the Beast: A Functional Semantics for the Awkward
    Squad</a></li> </ul>

  <h2>Feedback</h2><img style="float: right" width="102" height=
  "35" src="www/cabal.png" alt="Cabal">

  <p>If you have any comments or suggestions, please get in
  touch!</p>Wouter Swierstra<br>
  <img src="www/email.jpg" alt="Email address">

<script src="http://www.google-analytics.com/urchin.js" type="text/javascript"><</script>
<script type="text/javascript">
_uacct = "UA-1372453-2";
urchinTracker();
</script>
    </body>
</html>
